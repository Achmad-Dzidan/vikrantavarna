<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linimasa & Tim Proyek</title>
    <link rel="stylesheet" href="style/style.css">
</head>
<body>

    <div class="main-wrapper">
        <div class="card-backdrop"></div>
        
        <div class="content-stack">
            <div class="card headd-container">
                <p>Linimasa Kuliah Kerja Nyata</p>
                <p>VIKRANTAVARNA</p>
                <p><span class="headd">Universitas Islam Negeri Syarif Hidayatullah Jakarta</span></p>
            </div>
            
            <div class="card timeline-container">
                <h2>Linimasa Proyek Terperinci</h2>
                <!-- <p>Pilih bulan untuk melihat tugas yang diuraikan per divisi.</p> -->
                <ul class="timeline">
                    <li class="timeline-item">
                        <div class="item-date">28 Mei 2025</div>
                        <h3 class="item-title">Onboarding</h3>
                        <p class="item-desc">Perkenalan setiap anggota dan pembagian divisi</p>
                    </li>
                    <li class="timeline-item">
                        <div class="item-date">10 Juni 2025</div>
                        <h3 class="item-title">Perencanaan Proker</h3>
                        <p class="item-desc">Pembaruan jumlah proker menjadi 16 proker<br>(Cek selengkapnya di dashboard)</p>
                    </li>
                    <li class="timeline-item">
                        <div class="item-date">17 Juni 2025</div>
                        <h3 class="item-title">Rapat Berikutnya </h3>
                        <p class="item-desc">...</p>
                    </li>
                </ul>
            </div>

            <div class="card overview-container">
                <h2>Gambaran Umum Proyek</h2>
                <p>Visualisasi ini menunjukkan distribusi total tugas di antara semua divisi selama periode KKN. Gunakan bagan ini untuk mendapatkan pemahaman cepat tentang beban kerja setiap divisi.</p>
                
                <div class="chart-wrapper">
                    <canvas id="myDoughnutChart"></canvas>
                </div>
            </div>
            
            <div class="card progress-container">
                <h2>Kemajuan Bulan Ini</h2>
                <p>Ini adalah total kemajuan dari semua tugas yang tercatat untuk bulan yang sedang Anda lihat. Lacak progres keseluruhan Anda dengan cepat.</p>

                <div class="progress-section">
                    <label class="progress-label">Total Kemajuan Bulan Ini</label>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar-background">
                            <div id="progressBarFill" class="progress-bar-fill"></div>
                        </div>
                        <span id="progressPercentage" class="progress-percentage">0%</span>
                    </div>
                </div>
            </div>

            <div class="card task-progress-card">
                <h2>Kemajuan Progress</h2>
                <p>Pilih bulan untuk melihat tugas yang diuraikan per divisi. Centang kotak di sebelah setiap tugas untuk menandainya sebagai selesai dan lacak kemajuan Anda secara waktu nyata melalui bilah kemajuan.</p>

                <div class="tabs-nav">
                    <button class="tab-link active" data-tab="juni">Juni</button>
                    <button class="tab-link" data-tab="juli">Juli</button>
                </div>

                <div class="tabs-content">
                    <div id="juni" class="tab-pane active">
                        <div class="nested-card" id="progress-ketua-wakil">
                            <h3>Ketua dan Wakil</h3>
                            <div class="progress-section">
                                <label class="progress-label">Kemajuan</label>
                                <div class="progress-bar-wrapper">
                                    <div class="progress-bar-background">
                                        <div id="ketuaWakilProgressBarFill" class="progress-bar-fill"></div>
                                    </div>
                                    <span id="ketuaWakilPercentage" class="progress-percentage">0%</span>
                                </div>
                            </div>
                            <div class="task-list">
                                <p class="week-label">Minggu 1-4</p>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tugasKetua1" class="task-checkbox" data-parent-id="progress-ketua-wakil">
                                    <label for="tugasKetua1">Memantau semua progress divisi</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tugasKetua2" class="task-checkbox" data-parent-id="progress-ketua-wakil">
                                    <label for="tugasKetua2">Memimpin kelompok</label>
                                </div>
                            </div>
                        </div>
                        <div class="nested-card" id="progress-bendahara">
                                <h3>Bendahara</h3>
                                <div class="progress-section">
                                    <label class="progress-label">Kemajuan</label>
                                    <div class="progress-bar-wrapper">
                                        <div class="progress-bar-background">
                                            <div id="bendaharaProgressBarFill" class="progress-bar-fill"></div>
                                        </div>
                                        <span id="bendaharaPercentage" class="progress-percentage">0%</span>
                                    </div>
                                </div>
                                <div class="task-list">
                                    <p class="week-label">Minggu 1</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasBendahara1" class="task-checkbox" data-parent-id="progress-bendahara">
                                        <label for="tugasBendahara1">Pemantauan Pemasukan Dana</label>
                                    </div>
                                    
                                    <p class="week-label" style="margin-top: 16px;">Minggu 2</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasBendahara2" class="task-checkbox" data-parent-id="progress-bendahara">
                                        <label for="tugasBendahara2">Pemantauan Pemasukan Dana</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 3</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasBendahara3" class="task-checkbox" data-parent-id="progress-bendahara">
                                        <label for="tugasBendahara3">Pemantauan Pemasukan Dana</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasBendahara4" class="task-checkbox" data-parent-id="progress-bendahara">
                                        <label for="tugasBendahara4">Fiksasi RAB yang dicatat di proposal</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 4</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasBendahara5" class="task-checkbox" data-parent-id="progress-bendahara">
                                        <label for="tugasBendahara5">Pemantauan Pemasukan Dana</label>
                                    </div>
                                </div>
                            </div>

                            <div class="nested-card" id="progress-sekertaris">
                                <h3>Sekertaris</h3>
                                <div class="progress-section">
                                    <label class="progress-label">Kemajuan</label>
                                    <div class="progress-bar-wrapper">
                                        <div class="progress-bar-background">
                                            <div id="sekertarisProgressBarFill" class="progress-bar-fill"></div>
                                        </div>
                                        <span id="sekertarisPercentage" class="progress-percentage">0%</span>
                                    </div>
                                </div>
                                <div class="task-list">
                                    <p class="week-label">Minggu 1</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris1" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris1">Transparansi terkait progress per divisi hasil notulensi agar semuanya paham progress kelompok</label>
                                    </div>
                                    
                                    <p class="week-label" style="margin-top: 16px;">Minggu 2</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris2" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris2">Membuat Draft Proposal</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris3" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris3">Transparansi terkait progress per divisi hasil notulensi agar semuanya paham progress kelompok</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris4" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris4">Menentukan dan menetapkan birokrasi serta Standar Operasional Prosedur (SOP) terkait penomoran surat</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 3</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris5" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris5">Membuat dan mengedarkan surat-surat resmi yang diperlukan</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris6" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris6">Merapikan dan mengarsipkan semua dokumen digital</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 4</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasSekertaris7" class="task-checkbox" data-parent-id="progress-sekertaris">
                                        <label for="tugasSekertaris7">Menyusun Laporan Pertanggungjawaban (LPJ) kegiatan</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="nested-card" id="progress-acara">
                                <h3>Acara</h3>
                                <div class="progress-section">
                                    <label class="progress-label">Kemajuan</label>
                                    <div class="progress-bar-wrapper">
                                        <div class="progress-bar-background">
                                            <div id="acaraProgressBarFill" class="progress-bar-fill"></div>
                                        </div>
                                        <span id="acaraPercentage" class="progress-percentage">0%</span>
                                    </div>
                                </div>
                                <div class="task-list">
                                    <p class="week-label">Minggu 1</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasAcara1" class="task-checkbox" data-parent-id="progress-acara">
                                        <label for="tugasAcara1">Merancang Nama, Jargon, Tema</label>
                                    </div>
                                    
                                    <p class="week-label" style="margin-top: 16px;">Minggu 2</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasAcara2" class="task-checkbox" data-parent-id="progress-acara">
                                        <label for="tugasAcara2">Memilah dan menentukan program kerja yang mau dibawa di kelompok kkn</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasAcara3" class="task-checkbox" data-parent-id="progress-acara">
                                        <label for="tugasAcara3">Setor RAB ke Bendahara</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasAcara4" class="task-checkbox" data-parent-id="progress-acara">
                                        <label for="tugasAcara4">Finish Nama, Jargon, dan Tema</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 3</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasAcara5" class="task-checkbox" data-parent-id="progress-acara">
                                        <label for="tugasAcara5">Fiksasi program kerja</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 4</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasAcara6" class="task-checkbox" data-parent-id="progress-acara">
                                        <label for="tugasAcara6">Membuat booklet dengan kegiatan yang sudah fiks yang mau kita bawa</label>
                                    </div>
                                </div>
                            </div>

                            <div class="nested-card" id="progress-humas">
                                <h3>Humas</h3>
                                <div class="progress-section">
                                    <label class="progress-label">Kemajuan</label>
                                    <div class="progress-bar-wrapper">
                                        <div class="progress-bar-background">
                                            <div id="humasProgressBarFill" class="progress-bar-fill"></div>
                                        </div>
                                        <span id="humasPercentage" class="progress-percentage">0%</span>
                                    </div>
                                </div>
                                <div class="task-list">
                                    <p class="week-label">Minggu 1</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasHumas1" class="task-checkbox" data-parent-id="progress-humas">
                                        <label for="tugasHumas1">Membuat List Nama Instansi</label>
                                    </div>
                                    
                                    <p class="week-label" style="margin-top: 16px;">Minggu 2</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasHumas2" class="task-checkbox" data-parent-id="progress-humas">
                                        <label for="tugasHumas2">Sosialisasi dan membuat template broadcast untuk pengiriman proposal</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasHumas3" class="task-checkbox" data-parent-id="progress-humas">
                                        <label for="tugasHumas3">Setor RAB ke Bendahara</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 3</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasHumas4" class="task-checkbox" data-parent-id="progress-humas">
                                        <label for="tugasHumas4">Penyebaran broadcast internal kepada anggota kelompok</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 4</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasHumas5" class="task-checkbox" data-parent-id="progress-humas">
                                        <label for="tugasHumas5">Follow up hasil penyerahan proposal transparansi ke anggota kelompok</label>
                                    </div>
                                </div>
                            </div>

                            <div class="nested-card" id="progress-pdd">
                                <h3>PDD</h3>
                                <div class="progress-section">
                                    <label class="progress-label">Kemajuan</label>
                                    <div class="progress-bar-wrapper">
                                        <div class="progress-bar-background">
                                            <div id="pddProgressBarFill" class="progress-bar-fill"></div>
                                        </div>
                                        <span id="pddPercentage" class="progress-percentage">0%</span>
                                    </div>
                                </div>
                                <div class="task-list">
                                    <p class="week-label">Minggu 1</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd1" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd1">Membuat Logo, dan Start Desain, Colour Pallete, Membuat Sosmed</label>
                                    </div>
                                    
                                    <p class="week-label" style="margin-top: 16px;">Minggu 2</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd2" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd2">Fiksasi logo</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd3" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd3">Desain live report</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd4" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd4">Start feeds IG</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd5" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd5">Start bikin konten yang menaikkan insight sosmed</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd6" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd6">Membuat desain cover proposal</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd7" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd7">Setor RAB ke Bendahara</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 3</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd8" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd8">Fiksasi desain final cover proposal dan page desain ke Sekertaris</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd9" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd9">Foto kepengurusan Offline</label>
                                    </div>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd10" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd10">Memikirkan konsep foto</label>
                                    </div>

                                    <p class="week-label" style="margin-top: 16px;">Minggu 4</p>
                                    <div class="checkbox-item">
                                        <input type="checkbox" id="tugasPdd11" class="task-checkbox" data-parent-id="progress-pdd">
                                        <label for="tugasPdd11">Membuat video dokumentasi akhir kegiatan</label>
                                    </div>
                                </div>
                            </div>
                    </div>

                    <div id="juli" class="tab-pane">
                        <p style="text-align: center; color: #65676b; padding: 20px 0;">Konten untuk bulan Juli akan ditampilkan di sini.</p>
                    </div>
                </div>
            </div>



        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Mengambil elemen canvas dari HTML
    const ctx = document.getElementById('myDoughnutChart');

    // DATA BARU (berdasarkan gambar rincian tugas)
    const data = {
        labels: [
            'Ketua', 
            'Sekertaris', 
            'Bendahara', 
            'Acara', 
            'Logistik', 
            'Humas',
            'Konsumsi',
            'PDD'
        ],
        datasets: [{
            label: 'Jumlah Tugas',
            // Jumlah tugas yang sudah dihitung dari gambar
            data: [12, 6, 9, 4, 4, 4, 4, 7], 
            // Palet warna baru untuk 8 divisi
            backgroundColor: [
                '#3498db', // Biru (Ketua)
                '#9b59b6', // Ungu (Sekertaris)
                '#e67e22', // Oranye (Bendahara)
                '#e74c3c', // Merah (Acara)
                '#f1c40f', // Kuning (Logistik)
                '#1abc9c', // Pirus (Humas)
                '#2ecc71', // Hijau (Konsumsi)
                '#7f8c8d'  // Abu-abu (PDD)
            ],
            borderColor: '#f0f2f5', // Warna border sama dengan latar kartu
            borderWidth: 4,
            hoverOffset: 8
        }]
    };

    // Konfigurasi untuk chart (tetap sama)
    const config = {
        type: 'doughnut',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '50%',
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 20,
                        boxWidth: 12,
                        font: {
                            family: "'Roboto', sans-serif"
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed !== null) {
                                label += context.parsed + ' Tugas';
                            }
                            return label;
                        }
                    }
                }
            }
        }
    };

    // Membuat atau memperbarui chart
    // Cek jika chart sudah ada, hancurkan dulu sebelum membuat yang baru
    let myDoughnutChart = Chart.getChart(ctx);
    if (myDoughnutChart) {
        myDoughnutChart.destroy();
    }
    myDoughnutChart = new Chart(ctx, config);
</script>

<script>
// GANTI SELURUH BLOK SCRIPT LAMA ANDA DENGAN YANG INI

document.addEventListener('DOMContentLoaded', () => {

    // --- FUNGSI-FUNGSI UTAMA ---

    /**
     * (MODIFIKASI) Fungsi ini sekarang hanya fokus memperbarui UI progress bar utama.
     * @param {number} percentage - Angka persentase (0-100).
     */
    function updateProgress(percentage) {
        const validPercentage = Math.max(0, Math.min(100, percentage));
        const progressBarFill = document.getElementById('progressBarFill');
        const progressPercentageText = document.getElementById('progressPercentage');

        if (progressBarFill && progressPercentageText) {
            progressBarFill.style.width = validPercentage + '%';
            progressPercentageText.textContent = Math.round(validPercentage) + '%';
        }
    }

    /**
     * (BARU) Fungsi untuk menghitung dan memperbarui progress total dari semua divisi.
     */
    function updateTotalProgress() {
        // Ambil semua checkbox tugas yang ada
        const allTasks = document.querySelectorAll('.task-progress-card .task-checkbox');
        // Ambil semua checkbox tugas yang sudah dicentang
        const checkedTasks = document.querySelectorAll('.task-progress-card .task-checkbox:checked');
        
        const totalPercentage = allTasks.length > 0 ? (checkedTasks.length / allTasks.length) * 100 : 0;
        
        // Panggil fungsi updateProgress untuk bar utama
        updateProgress(totalPercentage);
    }

    /**
     * Fungsi untuk memperbarui progress bar per divisi di dalam nested card.
     * @param {string} parentId - ID dari div .nested-card.
     */
    function updateTaskProgress(parentId) {
        const parentElement = document.getElementById(parentId);
        if (!parentElement) return;

        const checkboxesInGroup = parentElement.querySelectorAll('.task-checkbox');
        const checkedCount = parentElement.querySelectorAll('.task-checkbox:checked').length;
        const totalTasks = checkboxesInGroup.length;
        const percentage = totalTasks > 0 ? (checkedCount / totalTasks) * 100 : 0;

        const progressBarFill = parentElement.querySelector('.progress-bar-fill');
        const percentageText = parentElement.querySelector('.progress-percentage');
        
        if(progressBarFill && percentageText) {
            progressBarFill.style.width = percentage + '%';
            percentageText.textContent = Math.round(percentage) + '%';
        }
    }
    
    // --- FUNGSI PENYIMPANAN & PEMUATAN ---
    function saveCheckboxStates() {
        const states = {};
        document.querySelectorAll('.task-checkbox').forEach(checkbox => {
            states[checkbox.id] = checkbox.checked;
        });
        localStorage.setItem('savedCheckboxStates', JSON.stringify(states));
    }

    function loadCheckboxStates() {
        const savedStates = JSON.parse(localStorage.getItem('savedCheckboxStates'));
        if (savedStates) {
            Object.keys(savedStates).forEach(checkboxId => {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox) {
                    checkbox.checked = savedStates[checkboxId];
                }
            });
        }
    }

    // --- PENGATURAN EVENT LISTENER & INISIALISASI ---

    // Logika untuk Tab
    document.querySelectorAll('.tab-link').forEach(link => {
        link.addEventListener('click', () => {
            const tabId = link.getAttribute('data-tab');
            document.querySelectorAll('.tab-link').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.tab-pane').forEach(item => item.classList.remove('active'));
            link.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });

    // Logika untuk setiap checkbox tugas
    document.querySelectorAll('.task-checkbox').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const parentId = checkbox.getAttribute('data-parent-id');
            // 1. Perbarui progress bar divisi lokal
            updateTaskProgress(parentId);
            // 2. (BARU) Perbarui progress bar total
            updateTotalProgress();
            // 3. Simpan status ke localStorage
            saveCheckboxStates();
        });
    });

    // Inisialisasi Halaman saat pertama kali dimuat
    loadCheckboxStates(); // Muat semua status centang

    // Perbarui semua progress bar divisi
    document.querySelectorAll('.nested-card[id]').forEach(container => {
        updateTaskProgress(container.id);
    });

    // (BARU) Perbarui progress bar total di paling atas
    updateTotalProgress();

});
</script>

<script>
    // Letakkan ini di dalam tag <script> Anda

// --- (BARU) LOGIKA UNTUK TAB & PROGRESS BAR INTERAKTIF ---

document.addEventListener('DOMContentLoaded', () => {

    // --- LOGIKA UNTUK SISTEM TAB ---
    const tabLinks = document.querySelectorAll('.tab-link');
    const tabPanes = document.querySelectorAll('.tab-pane');

    tabLinks.forEach(link => {
        link.addEventListener('click', () => {
            const tabId = link.getAttribute('data-tab');

            // Hapus kelas 'active' dari semua link dan pane
            tabLinks.forEach(item => item.classList.remove('active'));
            tabPanes.forEach(item => item.classList.remove('active'));

            // Tambah kelas 'active' ke yang diklik dan kontennya
            link.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });

    // --- LOGIKA UNTUK PROGRESS BAR YANG DIKONTROL CHECKBOX ---
    const allTaskCheckboxes = document.querySelectorAll('.task-checkbox');

    allTaskCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            // Dapatkan ID dari parent container (misal: 'progress-ketua-wakil')
            const parentId = checkbox.getAttribute('data-parent-id');
            updateTaskProgress(parentId);
        });
    });

    /**
     * Fungsi untuk memperbarui progress bar di dalam nested card.
     * @param {string} parentId - ID dari div .nested-card yang berisi checkbox dan bar.
     */
    function updateTaskProgress(parentId) {
        const parentElement = document.getElementById(parentId);
        if (!parentElement) return;

        // Dapatkan semua checkbox di dalam parent tersebut
        const checkboxesInGroup = parentElement.querySelectorAll('.task-checkbox');
        const checkedCount = parentElement.querySelectorAll('.task-checkbox:checked').length;
        const totalTasks = checkboxesInGroup.length;
        
        // Hitung persentase
        const percentage = totalTasks > 0 ? (checkedCount / totalTasks) * 100 : 0;

        // Dapatkan elemen bar dan teks persen yang spesifik
        const progressBarFill = parentElement.querySelector('.progress-bar-fill');
        const percentageText = parentElement.querySelector('.progress-percentage');
        
        if(progressBarFill && percentageText) {
            progressBarFill.style.width = percentage + '%';
            percentageText.textContent = Math.round(percentage) + '%';
        }
    }
});

// Ganti seluruh blok <script> Anda dengan yang ini

// --- (MODIFIKASI) LOGIKA LENGKAP DENGAN PENYIMPANAN LOCALSTORAGE ---

document.addEventListener('DOMContentLoaded', () => {

    // --- (BAGIAN 1) MEMUAT STATUS CHECKBOX DARI LOCALSTORAGE SAAT HALAMAN DIBUKA ---
    function loadCheckboxStates() {
        const savedStates = JSON.parse(localStorage.getItem('savedCheckboxStates'));
        
        if (savedStates) {
            Object.keys(savedStates).forEach(checkboxId => {
                const checkbox = document.getElementById(checkboxId);
                if (checkbox) {
                    checkbox.checked = savedStates[checkboxId];
                }
            });
        }
    }

    // --- (BAGIAN 2) LOGIKA UNTUK SISTEM TAB ---
    const tabLinks = document.querySelectorAll('.tab-link');
    const tabPanes = document.querySelectorAll('.tab-pane');

    tabLinks.forEach(link => {
        link.addEventListener('click', () => {
            const tabId = link.getAttribute('data-tab');
            tabLinks.forEach(item => item.classList.remove('active'));
            tabPanes.forEach(item => item.classList.remove('active'));
            link.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        });
    });

    // --- (BAGIAN 3) LOGIKA UNTUK PROGRESS BAR DAN PENYIMPANAN ---
    const allTaskCheckboxes = document.querySelectorAll('.task-checkbox');

    // Fungsi untuk memperbarui progress bar
    function updateTaskProgress(parentId) {
        const parentElement = document.getElementById(parentId);
        if (!parentElement) return;

        const checkboxesInGroup = parentElement.querySelectorAll('.task-checkbox');
        const checkedCount = parentElement.querySelectorAll('.task-checkbox:checked').length;
        const totalTasks = checkboxesInGroup.length;
        const percentage = totalTasks > 0 ? (checkedCount / totalTasks) * 100 : 0;

        const progressBarFill = parentElement.querySelector('.progress-bar-fill');
        const percentageText = parentElement.querySelector('.progress-percentage');
        
        if(progressBarFill && percentageText) {
            progressBarFill.style.width = percentage + '%';
            percentageText.textContent = Math.round(percentage) + '%';
        }
    }

    // Fungsi untuk menyimpan status semua checkbox ke localStorage
    function saveCheckboxStates() {
        const states = {};
        allTaskCheckboxes.forEach(checkbox => {
            states[checkbox.id] = checkbox.checked;
        });
        localStorage.setItem('savedCheckboxStates', JSON.stringify(states));
    }
    
    // Tambahkan event listener ke setiap checkbox
    allTaskCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', () => {
            const parentId = checkbox.getAttribute('data-parent-id');
            // 1. Perbarui UI (progress bar)
            updateTaskProgress(parentId);
            // 2. Simpan status terbaru ke localStorage
            saveCheckboxStates();
        });
    });

    // --- (BAGIAN 4) INISIALISASI HALAMAN ---
    // Panggil fungsi untuk memuat status dari localStorage
    loadCheckboxStates();

    // Setelah status dimuat, perbarui semua progress bar agar sesuai
    const allProgressContainers = document.querySelectorAll('.nested-card[id]');
    allProgressContainers.forEach(container => {
        updateTaskProgress(container.id);
    });

});
</script>
</body>
</html>